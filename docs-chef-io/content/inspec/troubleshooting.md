+++
title = "Chef InSpec Troubleshooting"
draft = false
gh_repo = "inspec"

[menu]
  [menu.inspec]
    title = "Troubleshooting"
    identifier = "inspec/Troubleshooting"
    parent = "inspec"
    weight = 55
+++

## Undefined Local Variable or Method Error for Cloud Resource

This error is a result of invoking a resource from one of the cloud resource packs without initializing an InSpec profile with that resource pack (AWS, Azure, or GCP) as a dependency.

InSpec profiles that use **any cloud resource** must have the resource pack defined as a dependency.

See the relevant resource pack readme for instructions:

- [inspec-aws README](https://github.com/inspec/inspec-aws#use-the-resources)
- [inspec-azure README](https://github.com/inspec/inspec-azure#use-the-resources)
- [inspec-gcp README](https://github.com/inspec/inspec-gcp#use-the-resources)

## Exit Code 174

Exit code 174 comes from running Chef InSpec 6 or greater without setting a Chef License key.
See the [InSpec install documentation](/inspec/install/) for setting a Chef License key.
See the [Chef License documentation](/licensing/) for more information about Chef licensing.
## License is not entitled to use InSpec

The error indicates the license key used with Chef InSpec, version 6 or higher, is not entitled to the software Chef InSpec. To resolve this issue you need to use a license key which is entitled to Chef InSpec.
<!-- TODO Need to check the validity of below license information link-->
See the [Chef License documentation](/license/) for more information about Chef licensing.

## Unable to connect to the licensing server. InSpec requires server communication to operate

The error indicates that Chef InSpec, version 6 or higher, is having trouble connecting to the Licensing Service. This service is responsible for validating the Chef license key used with Chef InSpec. The Licensing Service can either be a Chef's Licensing Service or it can be configured to point to Local Licensing Service.

Here are a few steps to troubleshoot and resolve this issue:

- Check Network Connectivity: Ensure that the machine running Chef InSpec has proper network connectivity. It should be able to reach the Licensing Service's endpoint. This includes checking firewall settings and network configuration.

- Service Availability: If it's a Local Licensing Service, ensure that it's properly configured and operational. Any misconfigurations or issues with the local service could lead to connection problems.

- URL Configuration: Verify that the URL configured in Chef InSpec is correct. If the URL is configured using an environment variable, check the value for environment variable `CHEF_LICENSE_SERVER` to confirm the configured URL.

- Logs and Debugging: Check the logs generated by Chef InSpec by using `--log-level debug` for more detailed error messages. Pay close attention to the URL that Chef InSpec is attempting to connect to.

- Support and Assistance: If the issue persists, please reach out to Chef's Customer Success managers or Support Team.

## Invalid File Format Version

This error encountered with Chef InSpec, version 6 or higher, is specifically related to `licenses.yaml` file.
It indicates that the version of file format used in the file is either unsupported or is invalid.
It is a requirement for `licenses.yaml` file to use the latest supported file format version.

Please restore the file to the original state to resolve this issue.

## License file contents are corrupted

This error encountered with Chef InSpec, version 6 or higher, is specifically related to `licenses.yaml` file.
It indicates that the file has been malformed and corrupted due to external tampering.

Please restore the file content to its original state to resolve this issue.