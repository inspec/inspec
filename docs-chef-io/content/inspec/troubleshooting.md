+++
title = "Chef InSpec Troubleshooting"
draft = false
gh_repo = "inspec"

[menu]
  [menu.inspec]
    title = "Troubleshooting"
    identifier = "inspec/Troubleshooting"
    parent = "inspec"
    weight = 55
+++

## Undefined Local Variable or Method Error for Cloud Resource

This error is a result of invoking a resource from one of the cloud resource packs without initializing an InSpec profile with that resource pack (AWS, Azure, or GCP) as a dependency.

InSpec profiles that use **any cloud resource** must have the resource pack defined as a dependency.

See the relevant resource pack readme for instructions:

- [inspec-aws README](https://github.com/inspec/inspec-aws#use-the-resources)
- [inspec-azure README](https://github.com/inspec/inspec-azure#use-the-resources)
- [inspec-gcp README](https://github.com/inspec/inspec-gcp#use-the-resources)

## Exit Code 174

Exit code 174 comes from running Chef InSpec 6 or greater without setting a Chef License key.
See the [InSpec install documentation](/inspec/install/) for setting a Chef License key.
See the [Chef License documentation](/licensing/) for more information about Chef licensing.
## License is not entitled to use InSpec

The license key used with Chef InSpec is not entitled to use Chef InSpec. To resolve this issue, set a license key that is entitled to Chef InSpec.

See the [Chef Licensing documentation](/licensing/) for more information.

## Unable to connect to the licensing server. InSpec requires server communication to operate

Chef InSpec cannot connect to Chef's licensing service or a user-deployed Chef Private Licensing Service.
This service is responsible for validating the Chef license key set with Chef InSpec.

Check the following possible causes of this issue:

- Check Network Connectivity: Ensure that the machine running Chef InSpec has proper network connectivity. It should be able to reach the Chef's Licensing Service or a user-deployed Private Licensing Service. This includes checking firewall settings and network configuration.

- Service Availability: If you're using a user-deployed Chef Private Licensing Service, verify that it's correctly configured and operational. Any misconfigurations or issues with the Private Licensing Service could lead to connection problems.

- URL Configuration: Verify that the URL configured in Chef InSpec is correct. If the URL is configured using an environment variable, check the value for environment variable `CHEF_LICENSE_SERVER` to confirm the configured URL.

- Logs and Debugging: Check the logs generated by Chef InSpec by using `--log-level debug` for more detailed error messages. Pay close attention to the URL that Chef InSpec is attempting to connect to.

- Support and Assistance: If the issue persists, please reach out to Chef's Customer Success managers or Support Team.

## Invalid File Format Version

The file format version used in the `licenses.yaml` file is either unsupported or is invalid.
The `licenses.yaml` file must have the latest supported file format version.

Please restore the file to the original state to resolve this issue.

## License file contents are corrupted

The `licenses.yaml` file is malformed and corrupt.

Please restore the file content to its original state to resolve this issue.
